/**
 * path-value v0.9.2
 * Copyright 2021 Vitaly Tomilov
 * Released under the MIT License
 * https://github.com/vitaly-t/path-value
 */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pathValue=e()}(function(){return function o(n,i,a){function s(r,e){if(!i[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}t=i[r]={exports:{}},n[r][0].call(t.exports,function(e){return s(n[r][1][e]||e)},t,t.exports,o,n,i,a)}return i[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,r,t){"use strict";var o,n=this&&this.__extends||(o=function(e,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=e}o(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.PathExistError=t.PathError=void 0;var i,a=e("./types"),e=(i=Error,n(s,i),s);function s(e,r){e=i.call(this,e)||this;return e.chain=r.chain,e.code=r.errorCode,e.codeName="PathErrorCode."+a.PathErrorCode[e.code],r.options&&(e.options=r.options),e.idx=r.idx,e.scope=r.scope,Object.setPrototypeOf(e,s.prototype),e}t.PathError=e;var u,n=(u=Error,n(l,u),l);function l(e,r,t){e=u.call(this,e)||this;return e.chain=r.chain,e.propName=t,r.options&&(e.options=r.options),e.scope=r.scope,Object.setPrototypeOf(e,l.prototype),e}t.PathExistError=n},{"./types":5}],2:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveIfExists=t.resolveValue=t.validateExists=t.validateErrorCode=t.tokenizePath=t.resolvePath=t.PathExistError=t.PathError=t.PathErrorCode=void 0;var o=e("./types");Object.defineProperty(t,"PathErrorCode",{enumerable:!0,get:function(){return o.PathErrorCode}});var n=e("./errors");Object.defineProperty(t,"PathError",{enumerable:!0,get:function(){return n.PathError}}),Object.defineProperty(t,"PathExistError",{enumerable:!0,get:function(){return n.PathExistError}});var i=e("./parsers");Object.defineProperty(t,"resolvePath",{enumerable:!0,get:function(){return i.resolvePath}}),Object.defineProperty(t,"tokenizePath",{enumerable:!0,get:function(){return i.tokenizePath}});var a=e("./validators");Object.defineProperty(t,"validateErrorCode",{enumerable:!0,get:function(){return a.validateErrorCode}}),Object.defineProperty(t,"validateExists",{enumerable:!0,get:function(){return a.validateExists}});var s=e("./resolvers");Object.defineProperty(t,"resolveValue",{enumerable:!0,get:function(){return s.resolveValue}}),Object.defineProperty(t,"resolveIfExists",{enumerable:!0,get:function(){return s.resolveIfExists}})},{"./errors":1,"./parsers":3,"./resolvers":4,"./types":5,"./validators":7}],3:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenizePath=t.resolvePath=void 0;var f=e("./types"),p=e("./utils");t.resolvePath=function(e,r,t){for(var o,n,i="string"==typeof r?-1===r.indexOf(".")?[r]:r.split("."):r,a=i.length,s=t&&t.ignoreFunctions,u=0,l=!0,c=e;u<a;u++){var d=i[u];if(""===d)return{chain:i,scope:c,options:t,idx:u-1,errorCode:f.PathErrorCode.emptyName};if(n="this"===d){if(u)return{chain:i,scope:c,options:t,idx:u-1,errorCode:f.PathErrorCode.invalidThis};e=c=this}if(null==e){n&&(o=e,u++);break}for(o=n?e:e[d];!s&&"function"==typeof o&&!p.isClass(o);)o=o.call(e);if(null==o){u++,void 0===o&&u===a&&(l=d in("object"==typeof e?e:e.constructor.prototype));break}if("function"==typeof o.then)return{chain:i,scope:c,options:t,idx:u-1,errorCode:f.PathErrorCode.asyncValue};if("function"==typeof o.next)return{chain:i,scope:c,options:t,idx:u-1,errorCode:f.PathErrorCode.genValue};e=o}return u===a?{chain:i,scope:c,options:t,idx:u-1,exists:l,value:o}:{chain:i,scope:c,options:t,idx:u-1,errorCode:f.PathErrorCode.stopped}},t.tokenizePath=function(e){for(var r,t=[],o=/\[\s*(\d+)(?=\s*])|\[\s*(["'])((?:\\.|(?!\2).)*)\2\s*]|[\w$]+/g;r=o.exec(e);)t.push(r[1]||r[3]||r[0]);return t}},{"./types":5,"./utils":6}],4:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveIfExists=t.resolveValue=void 0;var o=e("./parsers"),n=e("./validators");t.resolveValue=function(e,r,t){return t=o.resolvePath.call(this,e,r,t),n.validateErrorCode(t),t.value},t.resolveIfExists=function(e,r,t){return t=o.resolvePath.call(this,e,r,t),n.validateErrorCode(t),n.validateExists(t),t.value}},{"./parsers":3,"./validators":7}],5:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathErrorCode=void 0,(t=t.PathErrorCode||(t.PathErrorCode={}))[t.emptyName=1]="emptyName",t[t.invalidThis=2]="invalidThis",t[t.asyncValue=3]="asyncValue",t[t.genValue=4]="genValue",t[t.stopped=5]="stopped"},{}],6:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClass=void 0,t.isClass=function(e){return(e=Function.prototype.toString.call(e)).startsWith("class ")||e.startsWith("function ")&&e[9]<="Z"&&"A"<=e[9]}},{}],7:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateExists=t.validateErrorCode=void 0;var o=e("./types"),n=e("./errors");t.validateErrorCode=function(e){switch(e.errorCode){case o.PathErrorCode.emptyName:throw new n.PathError("Empty names are not allowed.",e);case o.PathErrorCode.invalidThis:throw new n.PathError("Keyword 'this' can only be at the start.",e);case o.PathErrorCode.asyncValue:var r=JSON.stringify(e.chain[e.idx+1]);throw new n.PathError("Cannot resolve "+r+": async functions and values are not supported.",e);case o.PathErrorCode.genValue:var t=JSON.stringify(e.chain[e.idx+1]);throw new n.PathError("Cannot resolve "+t+": iterators and generators are not supported.",e);case o.PathErrorCode.stopped:t=JSON.stringify(e.chain[e.idx+1]);throw new n.PathError("Cannot resolve "+t+" from null/undefined.",e)}},t.validateExists=function(e){if(!e.exists){var r=e.chain[e.chain.length-1];throw new n.PathExistError("Property "+JSON.stringify(r)+" doesn't exist.",e,r)}}},{"./errors":1,"./types":5}]},{},[2])(2)});
//# sourceMappingURL=path-value.min.js.map
