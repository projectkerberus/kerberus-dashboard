## API Report File for "@backstage/techdocs-common"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AzureIntegrationConfig } from '@backstage/integration';
import { Config } from '@backstage/config';
import { ContainerRunner } from '@backstage/backend-common';
import { Entity } from '@backstage/catalog-model';
import { EntityName } from '@backstage/catalog-model';
import express from 'express';
import { GitHubIntegrationConfig } from '@backstage/integration';
import { GitLabIntegrationConfig } from '@backstage/integration';
import { Logger } from 'winston';
import { PluginEndpointDiscovery } from '@backstage/backend-common';
import { UrlReader } from '@backstage/backend-common';
import { Writable } from 'stream';

// @public (undocumented)
export const checkoutGitRepository: (repoUrl: string, config: Config, logger: Logger) => Promise<string>;

// @public (undocumented)
export class CommonGitPreparer implements PreparerBase {
    constructor(config: Config, logger: Logger);
    // (undocumented)
    prepare(entity: Entity, options?: {
        etag?: string;
    }): Promise<PreparerResponse>;
}

// @public (undocumented)
export class DirectoryPreparer implements PreparerBase {
    constructor(config: Config, logger: Logger, reader: UrlReader);
    // (undocumented)
    prepare(entity: Entity): Promise<PreparerResponse>;
    }

// @public (undocumented)
export type GeneratorBase = {
    run(opts: GeneratorRunOptions): Promise<void>;
};

// @public
export type GeneratorBuilder = {
    register(protocol: SupportedGeneratorKey, generator: GeneratorBase): void;
    get(entity: Entity): GeneratorBase;
};

// @public (undocumented)
export class Generators implements GeneratorBuilder {
    // (undocumented)
    static fromConfig(config: Config, { logger, containerRunner, }: {
        logger: Logger;
        containerRunner: ContainerRunner;
    }): Promise<GeneratorBuilder>;
    // (undocumented)
    get(entity: Entity): GeneratorBase;
    // (undocumented)
    register(generatorKey: SupportedGeneratorKey, generator: GeneratorBase): void;
}

// @public (undocumented)
export const getAzureIntegrationConfig: (config: Config, host: string) => AzureIntegrationConfig;

// @public (undocumented)
export const getDefaultBranch: (repositoryUrl: string, config: Config) => Promise<string>;

// @public (undocumented)
export const getDocFilesFromRepository: (reader: UrlReader, entity: Entity, opts?: {
    etag?: string | undefined;
    logger?: Logger | undefined;
} | undefined) => Promise<PreparerResponse>;

// @public (undocumented)
export function getGitHost(url: string): string;

// @public (undocumented)
export const getGitHubIntegrationConfig: (config: Config, host: string) => GitHubIntegrationConfig;

// @public (undocumented)
export const getGitLabIntegrationConfig: (config: Config, host: string) => GitLabIntegrationConfig;

// @public (undocumented)
export const getGitRepositoryTempFolder: (repositoryUrl: string, config: Config) => Promise<string>;

// @public (undocumented)
export function getGitRepoType(url: string): string;

// @public (undocumented)
export const getLastCommitTimestamp: (repositoryLocation: string, logger: Logger) => Promise<number>;

// @public (undocumented)
export const getLocationForEntity: (entity: Entity) => ParsedLocationAnnotation;

// @public (undocumented)
export const getTokenForGitRepo: (repositoryUrl: string, config: Config) => Promise<string | undefined>;

// @public (undocumented)
export type ParsedLocationAnnotation = {
    type: RemoteProtocol;
    target: string;
};

// @public (undocumented)
export const parseReferenceAnnotation: (annotationName: string, entity: Entity) => ParsedLocationAnnotation;

// @public (undocumented)
export type PreparerBase = {
    prepare(entity: Entity, options?: {
        logger?: Logger;
        etag?: string;
    }): Promise<PreparerResponse>;
};

// @public (undocumented)
export type PreparerBuilder = {
    register(protocol: RemoteProtocol, preparer: PreparerBase): void;
    get(entity: Entity): PreparerBase;
};

// @public (undocumented)
export class Preparers implements PreparerBuilder {
    // (undocumented)
    static fromConfig(config: Config, { logger, reader }: factoryOptions): Promise<PreparerBuilder>;
    // (undocumented)
    get(entity: Entity): PreparerBase;
    // (undocumented)
    register(protocol: RemoteProtocol, preparer: PreparerBase): void;
}

// @public
export class Publisher {
    // (undocumented)
    static fromConfig(config: Config, { logger, discovery }: factoryOptions_2): Promise<PublisherBase>;
}

// @public
export interface PublisherBase {
    docsRouter(): express.Handler;
    fetchTechDocsMetadata(entityName: EntityName): Promise<TechDocsMetadata>;
    getReadiness(): Promise<ReadinessResponse>;
    hasDocsBeenGenerated(entityName: Entity): Promise<boolean>;
    publish(request: PublishRequest): Promise<PublishResponse>;
}

// @public
export type PublisherType = 'local' | 'googleGcs' | 'awsS3' | 'azureBlobStorage' | 'openStackSwift';

// @public
export type RemoteProtocol = 'url' | 'dir' | 'github' | 'gitlab' | 'file' | 'azure/api';

// @public (undocumented)
export class TechdocsGenerator implements GeneratorBase {
    constructor({ logger, containerRunner, config, }: {
        logger: Logger;
        containerRunner: ContainerRunner;
        config: Config;
    });
    // (undocumented)
    run({ inputDir, outputDir, parsedLocationAnnotation, etag, }: GeneratorRunOptions): Promise<void>;
}

// @public
export type TechDocsMetadata = {
    site_name: string;
    site_description: string;
    etag: string;
};

// @public (undocumented)
export class UrlPreparer implements PreparerBase {
    constructor(reader: UrlReader, logger: Logger);
    // (undocumented)
    prepare(entity: Entity, options?: {
        etag?: string;
    }): Promise<PreparerResponse>;
    }


// (No @packageDocumentation comment for this package)

```
